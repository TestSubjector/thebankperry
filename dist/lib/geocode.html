<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Geocode : Documentation</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="../assets_/css/shCore.css">
        <link rel="stylesheet" href="../assets_/css/shThemeDefault.css">
        <link rel="stylesheet" href="../assets_/css/main.css">
    </head>
    <body data-root-path="../">
        <div id="wrapper">
            <div id="content">
<ul id="topnav">
    <li><a href="../index.html">Index</a></li>
    <li><a href="#toc">TOC</a></li>
</ul>
<h1 id="geocode">Geocode</h1>

<p>File name: /lib/<a href="../lib/geocode.js">geocode.js</a></p>

<h2 id="tableofcontentsahreftocnametocclassdeeplinka">Table of Contents <a href="#toc" name="toc" class="deep-link">#</a></h2>

<ul>
<li><a href="#Introduction">Introduction</a></li>

<li><a href="#Requires">Requires</a></li>

<li><a href="#Logic">Logic</a></li>

<li><a href="#Usage">Usage</a></li>

<li><a href="#TODO">TODO</a></li>

<li><a href="#Comments">Comments</a></li>
</ul>

<h2 id="introductionahrefintroductionidintroductionclassdeeplinka">Introduction <a href="#Introduction" id="Introduction" class="deep-link">#</a></h2>

<p>This file provides the following location services for the bot:</p>

<ol>
<li>Reverse Geocoding.</li>

<li>Distance Between Two Coordinates.</li>
</ol>

<h2 id="requiresahrefrequiresidrequiresclassdeeplinka">Requires <a href="#Requires" id="Requires" class="deep-link">#</a></h2>

<ol>
<li><strong><a href="/doc/lib/schema.md">schema</a></strong> - self created mongodb schema module.</li>

<li><strong><a href="/doc/conf.md">conf</a></strong> - self created <em>untracked</em> configuration module.</li>

<li><strong>googlemaps</strong></li>
</ol>

<h2 id="logicahreflogicidlogicclassdeeplinka">Logic <a href="#Logic" id="Logic" class="deep-link">#</a></h2>

<ol>
<li>Loads and creates Google Maps Object as <code>map</code> using API key from <code>conf</code>.</li>

<li>Loads <code>schema</code> to get <code>atms</code> MongoDB Model Object.</li>

<li>Defines <code>getLocation</code> function for reverse geocoding using location name as String.


<ul>
<li>Async call to <code>maps.geocode</code>, with a callback.</li>

<li>Callback function callbacks the response callback with the location as JSON object.</li></ul>
</li>

<li>Defines <code>getDistance</code> function to calculate distance between two points on Earth.</li>

<li>Defines <code>getATMLocation</code> function to do a very bad job of finding ATM.</li>

<li>Returns the above three functions as a module.</li>
</ol>

<h2 id="usageahrefusageidusageclassdeeplinka">Usage <a href="#Usage" id="Usage" class="deep-link">#</a></h2>

<p>Sample code:</p>

<pre><code>var geocode = require('/path/to/geocode.js');
geocode.getLocation(address, function (err, latlng) {...});
geocode.getDistance(latlng1, latlng2, function (err, distance) {...});
geocode.getATMLocation(address, function (err, atmAsJSONString) {...})
</code></pre>

<h2 id="todoahreftodoidtodoclassdeeplinka">TODO <a href="#TODO" id="TODO" class="deep-link">#</a></h2>

<ol>
<li>Change the piece of shit that <code>getATMLocation</code> is.</li>

<li>Remove <code>schema</code> as a dependency of this module.</li>

<li>Refactor method names and respective parts of the rest of the code.</li>
</ol>

<h2 id="commentsahrefcommentsidcommentsclassdeeplinka">Comments <a href="#Comments" id="Comments" class="deep-link">#</a></h2>

<p>getATMLocation urgently needs to be rewritten. From scratch. Or I'll scratch my eyes off.</p>
                <hr />
                <small>Documentation generated by <a href="https://github.com/millermedeiros/mdoc">mdoc</a>.</small>
            </div>
        </div>
        <script src="../assets_/js/lib/jquery.js"></script>
        <script src="../assets_/js/lib/syntax-highlighter/shCore.js"></script>
        <script src="../assets_/js/lib/syntax-highlighter/shAutoloader.js"></script>
        <script src="../assets_/js/main.js"></script>
    </body>
</html>
